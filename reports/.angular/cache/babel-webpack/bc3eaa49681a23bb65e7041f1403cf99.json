{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../authentication/authentication.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/fire/compat/auth\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction PasswordResetComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelement(1, \"app-loading-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PasswordResetComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function PasswordResetComponent_div_7_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.removeErrorMessage();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \" \");\n  }\n}\n\nexport let PasswordResetComponent = /*#__PURE__*/(() => {\n  class PasswordResetComponent {\n    constructor(auth, activatedRoute, fAuth, router) {\n      this.auth = auth;\n      this.activatedRoute = activatedRoute;\n      this.fAuth = fAuth;\n      this.router = router;\n      this.isLoading = false;\n    }\n\n    ngOnInit() {\n      this.oobCode = this.activatedRoute.snapshot.queryParams['oobCode'];\n      console.log(this.oobCode);\n    }\n    /**\r\n     * Updates the password\r\n     */\n\n\n    updatePassword() {\n      if (this.oobCode && this.newPassword === this.newPasswordRepeat) {\n        // set isloading to true;\n        this.isLoading = true; // and communicate with the server\n\n        this.fAuth.confirmPasswordReset(this.oobCode, this.newPassword).then(() => {\n          // success, navigate to the main page??\n          this.isLoading = false;\n          this.router.navigate(['']);\n        }, error => {\n          this.isLoading = false;\n          this.errorMessage = error;\n        });\n      }\n    }\n\n    removeErrorMessage() {\n      this.errorMessage = undefined;\n    }\n\n  }\n\n  PasswordResetComponent.ɵfac = function PasswordResetComponent_Factory(t) {\n    return new (t || PasswordResetComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AngularFireAuth), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  PasswordResetComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PasswordResetComponent,\n    selectors: [[\"app-password-reset\"]],\n    decls: 28,\n    vars: 11,\n    consts: [[1, \"component-intro\"], [1, \"component-intro__title\"], [1, \"component-intro__description\"], [1, \"password-reset\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"password-reset__error\", 3, \"click\", 4, \"ngIf\"], [1, \"password-reset__submit\"], [1, \"input__button\", 3, \"disabled\", \"click\"], [1, \"password-reset__new\"], [1, \"password-reset__text\"], [1, \"password-reset__input-container\"], [1, \"tooltip\"], [\"type\", \"password\", \"name\", \"newPassword\", \"id\", \"newPassword\", \"password\", \"\", \"required\", \"\", 1, \"password-reset__input\", 3, \"ngModel\", \"ngModelChange\", \"keydown.enter\", \"blur\"], [\"type\", \"password\", \"name\", \"repeatPassword\", \"id\", \"repeatPassword\", \"password\", \"\", \"required\", \"\", 1, \"password-reset__input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"loading\"], [1, \"password-reset__error\", 3, \"click\"]],\n    template: function PasswordResetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Password Reset\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"h4\", 2);\n        i0.ɵɵtext(4, \" You will have gotten here from an email you recieved. If you navigated here from browser memory and wish to alter your password, please do so from the dahsboard. If you have forogtten your password please enter your email and click the (I forgot) link in the login above, and it will send you an email to bring you back to this page. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtemplate(6, PasswordResetComponent_div_6_Template, 2, 0, \"div\", 4);\n        i0.ɵɵtemplate(7, PasswordResetComponent_div_7_Template, 2, 1, \"div\", 5);\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵelementStart(9, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function PasswordResetComponent_Template_button_click_9_listener() {\n          return ctx.updatePassword();\n        });\n        i0.ɵɵtext(10, \"Reset Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵtext(13, \"New Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 10);\n        i0.ɵɵelementStart(15, \"div\");\n        i0.ɵɵtext(16, \"\\u00A0\");\n        i0.ɵɵelementStart(17, \"div\", 11);\n        i0.ɵɵtext(18, \"Password Strength\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function PasswordResetComponent_Template_input_ngModelChange_19_listener($event) {\n          return ctx.newPassword = $event;\n        })(\"keydown.enter\", function PasswordResetComponent_Template_input_keydown_enter_19_listener() {\n          return ctx.auth.testPassword(ctx.newPassword);\n        })(\"blur\", function PasswordResetComponent_Template_input_blur_19_listener() {\n          return ctx.auth.testPassword(ctx.newPassword);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 9);\n        i0.ɵɵtext(21, \"Please repeat...\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 10);\n        i0.ɵɵelementStart(23, \"div\");\n        i0.ɵɵtext(24, \"\\u00A0\");\n        i0.ɵɵelementStart(25, \"div\", 11);\n        i0.ɵɵtext(26, \"Password Match\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"input\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function PasswordResetComponent_Template_input_ngModelChange_27_listener($event) {\n          return ctx.newPasswordRepeat = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.auth.checkPasswordMatch(ctx.newPassword, ctx.newPasswordRepeat) || !ctx.auth.testPassword(ctx.newPassword));\n        i0.ɵɵadvance(6);\n        i0.ɵɵclassMapInterpolate1(\"password-reset__indicator password-reset__indicator--\", ctx.auth.getPasswordStrength(ctx.newPassword), \" tooltipped\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newPassword);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassMapInterpolate1(\"password-reset__indicator password-reset__indicator--\", ctx.auth.checkPasswordMatch(ctx.newPassword, ctx.newPasswordRepeat), \" tooltipped\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newPasswordRepeat);\n      }\n    },\n    directives: [i4.NgIf, i5.DefaultValueAccessor, i5.RequiredValidator, i5.NgControlStatus, i5.NgModel],\n    styles: [\"@charset \\\"UTF-8\\\";.password-reset[_ngcontent-%COMP%]{position:relative;display:grid;grid-template:max-content 1fr/1fr;align-items:baseline;grid-column-gap:1rem;column-gap:1rem;grid-row-gap:1rem;row-gap:1rem;width:50%;font-size:1.6rem;margin:2rem 0 0 2rem}.password-reset__title[_ngcontent-%COMP%]{font-weight:bold;text-align:center;font-size:3rem;margin-bottom:2rem}.password-reset__submit[_ngcontent-%COMP%]{grid-row:2/3;grid-column:1/2;justify-self:end}.password-reset__new[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/2;display:grid;grid-template-columns:1fr 1fr;grid-row-gap:1rem;row-gap:1rem;padding-left:1rem}.password-reset__text[_ngcontent-%COMP%]{font-weight:bold}.password-reset__input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.password-reset__input[_ngcontent-%COMP%]{position:relative;border-radius:1rem;padding:.6rem 1.2rem;letter-spacing:.15rem;box-shadow:0 .3rem .6rem #0000004d;transition:all .2s;width:100%}.password-reset__input[_ngcontent-%COMP%]:hover, .password-reset__input[_ngcontent-%COMP%]:focus{box-shadow:0 .4rem .8rem #00000080}.password-reset__indicator[_ngcontent-%COMP%]{border-radius:1rem 0 0 1rem;width:6rem;height:100%;transform:translate(1rem);display:flex;align-items:center;padding-left:.5rem}.password-reset__indicator--1[_ngcontent-%COMP%]{background-color:green}.password-reset__indicator--1[_ngcontent-%COMP%]:after{content:\\\"\\\\1f929\\\"}.password-reset__indicator--2[_ngcontent-%COMP%]{background-color:orange}.password-reset__indicator--2[_ngcontent-%COMP%]:after{content:\\\"\\\\1f610\\\"}.password-reset__indicator--3[_ngcontent-%COMP%]{background-color:red}.password-reset__indicator--3[_ngcontent-%COMP%]:after{content:\\\"\\\\1f613\\\"}.password-reset__indicator--true[_ngcontent-%COMP%]{background-color:green}.password-reset__indicator--true[_ngcontent-%COMP%]:after{content:\\\" \\\\1f44c\\\"}.password-reset__indicator--false[_ngcontent-%COMP%]{background-color:red}.password-reset__indicator--false[_ngcontent-%COMP%]:after{content:\\\"\\\\1f44e\\\"}.password-reset__error[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:80%;background-color:var(--color-style-juxtapose);border-radius:1rem 2rem;transition:all .2s;z-index:1000;padding:2rem;transform:translate(-50%,-50%);text-align:center;box-shadow:0 .2rem .4rem #0006}.password-reset__error[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 .4rem .6rem #000000b3}\"]\n  });\n  return PasswordResetComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}