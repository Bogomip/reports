{"ast":null,"code":"import { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app//services/templates.service\";\nimport * as i3 from \"src/app/services/sentences.service\";\nimport * as i4 from \"src/app/utilities/authentication/authentication.service\";\n\nfunction CreateTemplateComponent_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"(Hit escape or drop to stop reordering)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateTemplateComponent_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵlistener(\"drop\", function CreateTemplateComponent_div_17_div_1_Template_div_drop_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.dropPosition();\n    })(\"dragover\", function CreateTemplateComponent_div_17_div_1_Template_div_dragover_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.allowDrop($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const t_r7 = i0.ɵɵnextContext().index;\n    i0.ɵɵpropertyInterpolate(\"value\", t_r7);\n  }\n}\n\nfunction CreateTemplateComponent_div_17_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 20);\n    i0.ɵɵtext(2, \"Paragraph\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreateTemplateComponent_div_17_div_3_select_1_option_5_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const test_r22 = ctx.$implicit;\n    const testIndex_r23 = ctx.index;\n    const sentence_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", testIndex_r23 === 0 ? \"( Tests: \" : \"\", \" \", test_r22.name, \" \", testIndex_r23 < sentence_r19.tests.length - 1 ? \",\" : \")\", \" \");\n  }\n}\n\nfunction CreateTemplateComponent_div_17_div_3_select_1_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, CreateTemplateComponent_div_17_div_3_select_1_option_5_span_2_Template, 2, 3, \"span\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sentence_r19 = ctx.$implicit;\n    const s_r17 = i0.ɵɵnextContext().index;\n    const templateSegment_r6 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", sentence_r19.id);\n    i0.ɵɵproperty(\"selected\", sentence_r19.id === templateSegment_r6[s_r17 + 1]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sentence_r19.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", sentence_r19.tests);\n  }\n}\n\nfunction CreateTemplateComponent_div_17_div_3_select_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"select\", 22);\n    i0.ɵɵlistener(\"change\", function CreateTemplateComponent_div_17_div_3_select_1_Template_select_change_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r29);\n      const s_r17 = restoredCtx.index;\n      const t_r7 = i0.ɵɵnextContext(2).index;\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.updateElementRoute(t_r7, s_r17, $event.target.value);\n    });\n    i0.ɵɵelementStart(1, \"option\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"option\", 24);\n    i0.ɵɵtext(4, \"** All options inclusive **\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, CreateTemplateComponent_div_17_div_3_select_1_option_5_Template, 3, 4, \"option\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sentenceStem_r16 = ctx.$implicit;\n    const s_r17 = ctx.index;\n    const templateSegment_r6 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", s_r17 === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", s_r17 === 0 ? \"\" : \"** End **\", \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"selected\", ctx_r15.allInclusivityChecker(templateSegment_r6[s_r17 + 1]));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", sentenceStem_r16);\n  }\n}\n\nfunction CreateTemplateComponent_div_17_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CreateTemplateComponent_div_17_div_3_select_1_Template, 6, 4, \"select\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const t_r7 = i0.ɵɵnextContext().index;\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.viewData[t_r7]);\n  }\n}\n\nfunction CreateTemplateComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵlistener(\"drag\", function CreateTemplateComponent_div_17_Template_div_drag_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const t_r7 = restoredCtx.index;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.dragPositionChange(t_r7);\n    });\n    i0.ɵɵtemplate(1, CreateTemplateComponent_div_17_div_1_Template, 1, 1, \"div\", 17);\n    i0.ɵɵtemplate(2, CreateTemplateComponent_div_17_div_2_Template, 3, 0, \"div\", 8);\n    i0.ɵɵtemplate(3, CreateTemplateComponent_div_17_div_3_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementStart(4, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function CreateTemplateComponent_div_17_Template_div_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const t_r7 = restoredCtx.index;\n      const ctx_r34 = i0.ɵɵnextContext();\n      return ctx_r34.deleteElement(t_r7);\n    });\n    i0.ɵɵtext(5, \" \\u2716 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const templateSegment_r6 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.dragging);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", templateSegment_r6[0] === \"newParagraph\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", templateSegment_r6[0] !== \"newParagraph\");\n  }\n}\n\nfunction CreateTemplateComponent_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function CreateTemplateComponent_button_26_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return ctx_r35.createTemplate();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.canCreate());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.addingToDb ? \"Creating Template...\" : \"Create Template\");\n  }\n}\n\nfunction CreateTemplateComponent_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function CreateTemplateComponent_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return ctx_r37.updateTemplate();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", !ctx_r3.templateUpdated || !ctx_r3.templateSaved);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.updatingDb ? \"Updating Template...\" : \"Update Template\");\n  }\n}\n\nfunction CreateTemplateComponent_button_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function CreateTemplateComponent_button_28_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return ctx_r39.deleteTemplate();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r4.deletingTemplate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.deletingTemplate ? \"Deleting Template...\" : \"Delete Template\");\n  }\n}\n\nfunction CreateTemplateComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵtext(2, \"Example\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 30);\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"This is an example report that would be created from this template. There are a minimum of \");\n    i0.ɵɵelementStart(6, \"b\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" potential report combinations for this template.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"div\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r5.exampleSentence.options);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r5.exampleSentence.report, i0.ɵɵsanitizeHtml);\n  }\n}\n\nexport let CreateTemplateComponent = /*#__PURE__*/(() => {\n  class CreateTemplateComponent {\n    constructor(router, navigation, templateService, sentenceService, auth) {\n      this.router = router;\n      this.navigation = navigation;\n      this.templateService = templateService;\n      this.sentenceService = sentenceService;\n      this.auth = auth;\n      this.isLoading = false;\n      this.viewData = [[[]]];\n      this.templateName = \"\";\n      this.templateCharacters = {\n        min: 1,\n        max: 500\n      };\n      this.templateUpdated = false;\n      this.templateSaved = false;\n      this.updatingDb = false;\n      this.addingToDb = false;\n      this.exampleSentence = {\n        report: \"\",\n        options: 0\n      };\n      this.deletingTemplate = false;\n      this.dragging = false;\n      this.dragTimeout = false;\n    }\n\n    ngOnInit() {\n      this.isLoading = true; // get the user data...\n\n      this.auth.user.subscribe(user => {\n        // set the user\n        this.user = user; // get the sentence database...\n\n        this.sentenceService.getSentencesDatabase(user.id).pipe(take(1)).subscribe(data => {\n          const sentenceData = [data]; // set the data on the display\n\n          this.initialData = JSON.parse(JSON.stringify(sentenceData));\n          this.sentenceData = JSON.parse(JSON.stringify(sentenceData));\n          this.isLoading = false; // set an observable...\n          // subscribe to the parameter and if it changes then reload the information.\n\n          this.paramObservable = this.router.params.subscribe(params => {\n            // if no changes were saved for previous template then send the data back to the templates.ts\n            if (this.templateUpdated) {\n              this.changeEmitter(false, false, this.savedTemplate.name);\n            } // set the id and load the template\n\n\n            this.templateId = params.id;\n            this.loadTemplate(this.templateId);\n          });\n        }, error => {\n          console.log(`Error gathering the database: ${error.message}`);\n        });\n      });\n    }\n\n    ngOnDestroy() {\n      // unsubscribe fromt he parameters observable.\n      this.paramObservable.unsubscribe();\n    }\n    /**\r\n     * Load the template\r\n     * @param id\r\n     */\n\n\n    loadTemplate(id) {\n      if (id !== undefined) {\n        const templateData = this.templateService.getTemplate(id); // and use the data to populate the template...\n\n        this.templateCharacters.min = templateData.characters.min;\n        this.templateCharacters.max = templateData.characters.max;\n        this.templateName = templateData.name; // split the routes up into their paragraphs...\n\n        this.viewData = [[[]]];\n        this.templateRoutes = undefined;\n        this.updateViewdata(templateData.template);\n        this.savedTemplate = this.generateTemplate();\n        this.templateUpdated = false;\n        this.templateSaved = true;\n        this.exampleSentence = this.sentenceService.generateCompoundReport(this.templateRoutes);\n        this.exampleSentence.report = this.sentenceService.stripVariables(this.exampleSentence.report);\n      }\n    }\n    /**\r\n     * Updates the viewdata for a given route...\r\n     * @param route\r\n     */\n\n\n    updateViewdata(route) {\n      this.viewData = [[[]]];\n      this.templateRoutes = undefined;\n      route.forEach((route, elementId) => {\n        if (route[0] === \"newParagraph\") {\n          // add a new paragraph.\n          this.addParagraph();\n        } else {\n          // add a new element and add all the routes to it.\n          this.addElement(); // add routes.\n\n          route.forEach((routeCode, index) => {\n            try {\n              this.updateElementRoute(elementId, index - 1, routeCode);\n            } catch (error) {\n              console.log(`Error: ${error}`);\n              this.deleteElement(this.templateRoutes.length - 1);\n            }\n          });\n        }\n      });\n    }\n    /**\r\n     * From the enetred data generates a TemplateDB object\r\n     * @returns TemplateDB\r\n     */\n\n\n    generateTemplate() {\n      // parse the template first\n      let parsedTemplate = this.templateService.parseTemplate(this.templateRoutes);\n      return {\n        name: this.templateName,\n        characters: {\n          min: this.templateCharacters.min,\n          max: this.templateCharacters.max\n        },\n        manager: this.user.id,\n        public: false,\n        template: parsedTemplate\n      };\n    }\n    /**\r\n     * called from the html, creates the template then navigates to the edit page\r\n     * upon success...\r\n     */\n\n\n    createTemplate() {\n      // generate a new database format template\n      let newTemplate = this.generateTemplate();\n      this.addingToDb = true; // add to the database...\n\n      this.templateService.addNewTemplate(newTemplate, this.templateRoutes).subscribe(ret => {\n        // success\n        this.templateId = ret.id;\n        this.addingToDb = false;\n        this.savedTemplate = newTemplate;\n        this.templateSaved = true;\n        this.templateUpdated = false;\n        this.changeEmitter(false, true, this.templateName);\n        this.navigation.navigate(['templates/create-template/' + this.templateId]);\n      }, error => {\n        console.log(`Error: ${error}`);\n      });\n    }\n    /**\r\n     * Update the template in the database and in local storage...\r\n     */\n\n\n    updateTemplate() {\n      // generate a new template\n      let newTemplate = {\n        id: this.templateId,\n        name: this.templateName,\n        characters: {\n          min: this.templateCharacters.min,\n          max: this.templateCharacters.max\n        },\n        public: false,\n        template: this.templateRoutes\n      }; // set it as updating the db.\n\n      this.updatingDb = true; // subscribe tot he templates service and update as apprpriate...\n\n      this.templateService.updateTemplate(newTemplate).subscribe(() => {\n        // success\n        const newSavedTemplate = this.generateTemplate(); // and set flags.\n\n        this.updatingDb = false;\n        this.savedTemplate = newSavedTemplate;\n        this.templateUpdated = false;\n      }, error => {\n        console.log(`Error updating database (local storage unaffected): ${error}`);\n      });\n    }\n\n    addElement() {\n      if (this.templateRoutes !== undefined) {\n        this.templateRoutes.push([\"\"]);\n        this.viewData.push(this.sentenceService.getSentenceData(this.templateRoutes[this.templateRoutes.length - 1], false, ['name']));\n      } else {\n        this.templateRoutes = [[]];\n        this.viewData[0] = this.sentenceService.getSentenceData(this.templateRoutes[this.templateRoutes.length - 1], false, ['name']);\n      }\n\n      this.checkForUpdates();\n      this.exampleSentence = this.sentenceService.generateCompoundReport(this.templateRoutes);\n    }\n\n    deleteElement(elementId) {\n      this.templateRoutes.splice(elementId, 1);\n      this.viewData.splice(elementId, 1);\n      this.checkForUpdates();\n    }\n\n    addParagraph() {\n      if (this.templateRoutes !== undefined) {\n        this.templateRoutes.push([\"newParagraph\"]);\n        this.viewData.push(null);\n      } else {\n        this.templateRoutes = [[\"newParagraph\"]];\n        this.viewData[0] = null;\n      }\n\n      this.checkForUpdates();\n    }\n    /**\r\n     * Updates the view and route data for the selected route templates.\r\n     * @param elementId\r\n     * @param index\r\n     * @param id\r\n     */\n\n\n    updateElementRoute(elementId, index, id) {\n      let idCopy = id; // first set the route data\n      // NOTE here that nothing id done is ** end ** is clicked.\n\n      if (id === \"allOptInclusive\") {\n        // this means all options below this can contribute sentences...\n        const data = this.sentenceService.getSentenceData(this.templateRoutes[elementId], false, ['id'], false);\n        let allLastIds = \"\"; // iterate over the data to extract the next level of ids.\n\n        data[index].forEach((temp, index) => {\n          // divide the ids by a /\n          index !== 0 ? allLastIds += \"/\" : null; // add the id to the string\n\n          allLastIds += temp.id;\n        }); // set id to all the ids combined..\n\n        id = allLastIds;\n      } // up to here, all ids printed in the form id1/id2/id3 etc...\n\n\n      this.templateRoutes[elementId][index + 1] = id;\n      this.templateRoutes[elementId].length = index + 2; // generate an example sentence            \n\n      this.exampleSentence = this.sentenceService.generateCompoundReport(this.templateRoutes);\n      this.exampleSentence.report = this.sentenceService.stripVariables(this.exampleSentence.report); // console.log(`Stripping: ${this.sentenceService.stripVariables(this.exampleSentence.report)}`);\n      // finally set the viewdata\n\n      if (idCopy === (\"\" || \"allOptInclusive\")) {\n        this.viewData[elementId].splice(index + 1);\n      } else {\n        this.viewData[elementId] = this.sentenceService.getSentenceData(this.templateRoutes[elementId], false, ['id', 'name', 'tests'], false);\n      }\n\n      this.checkForUpdates();\n    }\n\n    checkForUpdates() {\n      if (this.savedTemplate) {\n        let currentTemplate = JSON.stringify(this.generateTemplate());\n        let oldTemplate = JSON.stringify(this.savedTemplate);\n\n        if (currentTemplate === oldTemplate) {\n          this.templateUpdated = false;\n          return false;\n        } else {\n          this.templateUpdated = true;\n          return true;\n        }\n      }\n\n      return undefined;\n    }\n\n    canCreate() {\n      if (this.templateSaved === false) {\n        if (this.templateName !== \"\" && this.templateCharacters.min && this.templateCharacters.max) {\n          if (this.templateCharacters.min < this.templateCharacters.max) {\n            if (this.templateRoutes) {\n              if (this.templateRoutes.length > 0) {\n                return false;\n              }\n            }\n          }\n        }\n      }\n\n      return true;\n    }\n\n    deleteTemplate() {\n      this.deletingTemplate = true;\n      this.templateService.deleteTemplate(this.templateId).subscribe(success => {\n        // success... reload?\n        this.deletingTemplate = false; // remove from the list\n\n        this.changeEmitter(true); // reload this page to a blank version...\n\n        this.navigation.navigate(['templates/create-template']);\n      }, error => {\n        console.log(`Error deleting template: ${error}`);\n        this.deletingTemplate = false;\n      });\n    }\n\n    changeEmitter(deleted = false, created = false, name = this.templateName) {\n      // only smit if the template is saved already...\n      if (this.templateSaved) {\n        const del = deleted ? deleted : false;\n        const cre = created ? created : false;\n        const emit = {\n          id: this.templateId,\n          name: name,\n          deleted: del,\n          created: cre\n        }; // and emit...\n\n        this.templateService.dataChange(emit);\n      }\n    }\n    /**\r\n     * Check if a string is a route combination\r\n     * @param route\r\n     * @returns\r\n     */\n\n\n    allInclusivityChecker(route) {\n      if (route !== undefined) {\n        if (route.split('/').length > 1) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    dragPositionChange(index) {\n      this.dragFrom = index;\n      this.dragging = true;\n    }\n\n    dropPosition() {\n      this.dragging = false;\n    }\n\n    allowDrop(event) {\n      event.preventDefault(); // get the target\n\n      let dropIndex = event.target.value;\n\n      if (dropIndex !== this.dragFrom && !this.dragTimeout) {\n        this.reOrderElements(this.dragFrom, dropIndex);\n        this.dragFrom = dropIndex; // set a timeout before a reorder can happen again\n\n        setTimeout(() => {\n          this.dragTimeout = false;\n        }, 500);\n      }\n    }\n\n    reOrderElements(from, to) {\n      this.dragTimeout = true;\n      let copy = [...this.templateRoutes[from]];\n      this.templateRoutes.splice(from, 1);\n      this.templateRoutes.splice(to, 0, copy);\n      this.updateViewdata(this.templateRoutes);\n    }\n    /**\r\n     * listen for the escape key press to make any tempory changes go away!\r\n     * @param event\r\n     */\n\n\n    onEscapeKeyPress(event) {\n      this.dragging = false;\n    }\n\n  }\n\n  CreateTemplateComponent.ɵfac = function CreateTemplateComponent_Factory(t) {\n    return new (t || CreateTemplateComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.TemplatesService), i0.ɵɵdirectiveInject(i3.SentencesService), i0.ɵɵdirectiveInject(i4.AuthenticationService));\n  };\n\n  CreateTemplateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateTemplateComponent,\n    selectors: [[\"app-create-template\"]],\n    hostBindings: function CreateTemplateComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown.escape\", function CreateTemplateComponent_keydown_escape_HostBindingHandler($event) {\n          return ctx.onEscapeKeyPress($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 31,\n    vars: 9,\n    consts: [[1, \"create-template__form\"], [1, \"create-template__label\"], [\"id\", \"templateName\", 1, \"create-template__input\", \"create-template__input--name\", 3, \"ngModel\", \"keyup\", \"ngModelChange\"], [1, \"create-template__characters\"], [\"type\", \"number\", \"id\", \"charMin\", \"placeholder\", \"from\", 1, \"create-template__input\", \"create-template__input--number\", 3, \"ngModel\", \"keyup\", \"ngModelChange\"], [\"type\", \"number\", \"id\", \"charMax\", \"placeholder\", \"to\", 1, \"create-template__input\", \"create-template__input--number\", 3, \"ngModel\", \"keyup\", \"ngModelChange\"], [1, \"divider-line\", \"divider-line__thin\", \"u__margin-bottom--medium\", \"u__margin-top--medium\"], [1, \"create-template__structure\"], [4, \"ngIf\"], [1, \"create-template__builder\"], [\"class\", \"create-template__element\", \"draggable\", \"true\", 3, \"drag\", 4, \"ngFor\", \"ngForOf\"], [1, \"create-template__buttons\"], [1, \"create-template__new\", 3, \"click\"], [1, \"create-template__button-create\"], [\"class\", \"create-template__button-create--button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"class\", \"create-template__example\", 4, \"ngIf\"], [\"draggable\", \"true\", 1, \"create-template__element\", 3, \"drag\"], [\"class\", \"create-template__dragbox\", 3, \"value\", \"drop\", \"dragover\", 4, \"ngIf\"], [1, \"create-template__element--delete\", 3, \"click\"], [1, \"create-template__dragbox\", 3, \"value\", \"drop\", \"dragover\"], [1, \"create-template__element--paragraph\"], [\"name\", \"test\", \"id\", \"test\", \"class\", \"create-template__element--select\", 3, \"change\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"test\", \"id\", \"test\", 1, \"create-template__element--select\", 3, \"change\"], [\"value\", \"\", 3, \"disabled\"], [\"value\", \"allOptInclusive\", 3, \"selected\"], [\"value\", \"test\", 3, \"value\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"test\", 3, \"value\", \"selected\"], [4, \"ngFor\", \"ngForOf\"], [1, \"create-template__button-create--button\", 3, \"disabled\", \"click\"], [1, \"create-template__example\"], [1, \"create-template__example--description\"], [1, \"create-template__example-text\", 3, \"innerHTML\"]],\n    template: function CreateTemplateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"input\", 2);\n        i0.ɵɵlistener(\"keyup\", function CreateTemplateComponent_Template_input_keyup_3_listener() {\n          return ctx.checkForUpdates();\n        })(\"keyup\", function CreateTemplateComponent_Template_input_keyup_3_listener() {\n          return ctx.changeEmitter();\n        })(\"ngModelChange\", function CreateTemplateComponent_Template_input_ngModelChange_3_listener($event) {\n          return ctx.templateName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1);\n        i0.ɵɵtext(5, \"Character Limit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵelementStart(7, \"input\", 4);\n        i0.ɵɵlistener(\"keyup\", function CreateTemplateComponent_Template_input_keyup_7_listener() {\n          return ctx.checkForUpdates();\n        })(\"ngModelChange\", function CreateTemplateComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.templateCharacters.min = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"span\");\n        i0.ɵɵtext(9, \"to\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 5);\n        i0.ɵɵlistener(\"keyup\", function CreateTemplateComponent_Template_input_keyup_10_listener() {\n          return ctx.checkForUpdates();\n        })(\"ngModelChange\", function CreateTemplateComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.templateCharacters.max = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelementStart(13, \"div\", 1);\n        i0.ɵɵtext(14, \"Template Structure \");\n        i0.ɵɵtemplate(15, CreateTemplateComponent_span_15_Template, 2, 0, \"span\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 9);\n        i0.ɵɵtemplate(17, CreateTemplateComponent_div_17_Template, 6, 3, \"div\", 10);\n        i0.ɵɵelementStart(18, \"div\", 11);\n        i0.ɵɵtext(19, \" Add: \");\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵlistener(\"click\", function CreateTemplateComponent_Template_div_click_20_listener() {\n          return ctx.addElement();\n        });\n        i0.ɵɵtext(21, \"Sentence\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 12);\n        i0.ɵɵlistener(\"click\", function CreateTemplateComponent_Template_div_click_22_listener() {\n          return ctx.addParagraph();\n        });\n        i0.ɵɵtext(23, \"P\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"div\", 6);\n        i0.ɵɵelementStart(25, \"div\", 13);\n        i0.ɵɵtemplate(26, CreateTemplateComponent_button_26_Template, 2, 2, \"button\", 14);\n        i0.ɵɵtemplate(27, CreateTemplateComponent_button_27_Template, 2, 2, \"button\", 14);\n        i0.ɵɵtemplate(28, CreateTemplateComponent_button_28_Template, 2, 2, \"button\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"div\", 6);\n        i0.ɵɵtemplate(30, CreateTemplateComponent_div_30_Template, 10, 2, \"div\", 15);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.templateName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.templateCharacters.min);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.templateCharacters.max);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.dragging);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.templateRoutes);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", !ctx.templateSaved && !ctx.templateId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.templateSaved || ctx.templateId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.templateSaved || ctx.templateId);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.exampleSentence.report.length > 0);\n      }\n    },\n    styles: [\".create-template__form[_ngcontent-%COMP%]{display:grid;grid-template-columns:15rem 1fr;align-items:center;grid-row-gap:1rem;row-gap:1rem;grid-column-gap:1rem;column-gap:1rem;padding:0 2rem;font-size:1.6rem}.create-template__structure[_ngcontent-%COMP%]{padding:0 2rem}.create-template__builder[_ngcontent-%COMP%], .create-template__example-text[_ngcontent-%COMP%]{background-color:var(--color-style-light);width:100%;margin-top:1rem;border-radius:1rem;grid-row-gap:.5rem;row-gap:.5rem}.create-template__builder[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.create-template__example-text[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.5rem;display:inline-block}.create-template__highlight[_ngcontent-%COMP%]{font-weight:bold;color:red}.create-template__dragbox[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:1px dashed rgba(0,0,0,.5);background-color:#ffffff4d;border-radius:1rem}.create-template__element[_ngcontent-%COMP%]{position:relative;background-color:var(--color-style-main);font-size:1.3rem;letter-spacing:.15rem;padding:.5rem 1rem;border-radius:1rem;display:flex;align-items:center}.create-template__element--select[_ngcontent-%COMP%]{align-items:center;padding:.8rem 1rem;border-radius:1rem;margin-bottom:.2rem}.create-template__element--select[_ngcontent-%COMP%]:not(:last-of-type){margin-right:.2rem}.create-template__element--paragraph[_ngcontent-%COMP%]{padding:.5rem 1rem}.create-template__element--delete[_ngcontent-%COMP%]{border-radius:1rem;display:flex;align-items:center;text-align:center;background-color:var(--color-style-juxtapose);font-size:1.8rem;padding:0 .5rem;margin-left:.5rem;transition:all .2s;border:.2rem solid transparent}.create-template__element--delete[_ngcontent-%COMP%]:hover{cursor:pointer;filter:brightness(130%);border:.2rem solid black}.create-template__element[_ngcontent-%COMP%]:not(:last-child){margin-right:.2rem}.create-template__element[_ngcontent-%COMP%]:hover{cursor:move}.create-template__buttons[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:1rem;background-color:var(--color-style-juxtapose);border-radius:1rem;font-size:1.6rem;font-weight:bold;padding:.4rem .4rem .4rem 1rem}.create-template__button-create[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:2rem}.create-template__button-create--button[_ngcontent-%COMP%]{border-radius:1rem;padding:.5rem 1rem;font-size:1.6rem;border:.15rem solid transparent;transition:all .2s;background-color:var(--color-style-main)}.create-template__button-create--button[_ngcontent-%COMP%]:hover:enabled{transform:translateY(-.3rem);box-shadow:0 .2rem .4rem #00000080;cursor:pointer;border:.15rem solid black;color:#fff;background-color:var(--color-style-juxtapose)}.create-template__button-create--button[_ngcontent-%COMP%]:not(:last-of-type){margin-right:.5rem}.create-template__new[_ngcontent-%COMP%]{background-color:var(--color-style-main);font-size:1.4rem;font-weight:normal;letter-spacing:.15rem;padding:.7rem 1.2rem;border-radius:1rem;transition:all .2s;border:.2rem solid transparent}.create-template__new[_ngcontent-%COMP%]:hover{cursor:pointer;border:.2rem solid white;color:#fff;background-color:var(--color-style-juxtapose)}.create-template__new[_ngcontent-%COMP%]:first-of-type{margin-left:.5rem}.create-template__new[_ngcontent-%COMP%]:not(:last-of-type){margin-right:.5rem}.create-template__label[_ngcontent-%COMP%]{font-weight:bold;font-size:1.6rem}.create-template__characters[_ngcontent-%COMP%]{justify-self:stretch;display:flex;justify-content:flex-start;align-items:center}.create-template__characters[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem}.create-template__input[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:1rem;letter-spacing:.15rem}.create-template__input--name[_ngcontent-%COMP%]{grid-column:2/-1}.create-template__input--number[_ngcontent-%COMP%]{width:13rem}.create-template__example[_ngcontent-%COMP%]{padding:0 2rem}.create-template__example--description[_ngcontent-%COMP%]{margin-top:2rem;font-size:1.6rem}\"]\n  });\n  return CreateTemplateComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}