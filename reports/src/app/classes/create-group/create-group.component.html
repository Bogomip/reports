<div class="create-group">
    <div class="create-group__group-name">
        <div class="create-group__group-name--text">New group name</div>
        <div class="create-group__group-name--input">
            <input type="text" name="groupNameText" id="groupNameText" [(ngModel)]="groupname">
        </div>
    </div>

    <div class="create-group__input">

        <div class="create-group__text">
            
            <div class="create-group__text--textbox">
                <textarea name="groupInputBox" id="groupInputBox" class="create-group__text--textbox--input" [(ngModel)]="userInfo" placeholder="Paste your class data here to add to the group... For the best results make the top line your data titles, then each new line a new subject (student, employee etc) separating the data with commas... 'Alex,Bunting,Alex,alex@reportwriter.com,Other Data' would be a good example for one line."></textarea>
            </div>
            <div class="create-group__text--submit">
                <div class="create-group__text--header-check">
                    <button class="create-group__limiter-button" [class.create-group__limiter-button--selected]="separation === '\\t'" (click)="setDataSeparation('\\t')">Tab Seperated (Spreadsheets)</button>
                    <button class="create-group__limiter-button" [class.create-group__limiter-button--selected]="separation === '[,\\t]'" (click)="setDataSeparation('[,\\t]')">Tab and Comma (Powerteacher)</button>
                    <button class="create-group__limiter-button" [class.create-group__limiter-button--selected]="separation === ','" (click)="setDataSeparation(',')">Comma Seperated (Manual or CSV Input)</button>

                    <input type="checkbox" name="groupInputHeaderBox" id="groupInputHeaderBox" [(ngModel)]="headerRow" checked>
                    <label for="groupInputHeaderBox">Top row is header text (recommended!)</label>
                </div>
                <button class="create-group__text--submit--button create-group__text--submit--enabled" (click)="generateUserData()">Create Group</button>
            </div>
        </div>
<!-- 
        <div class="create-group__or">
            or...
        </div>

        <div class="create-group__drop" draggable="true" (drop)="fileDropped()">
            <div class="create-group__drop--text">
                Drag CSV file here...
            </div>
        </div> -->
    </div>

    <div class="create-group__controls" *ngIf="userDataGenerated">
        <div class="create-group__control-buttons">
            <button class="create-group__text--submit--button" [class.create-group__text--submit--enabled]="!dataSubmitting && groupname" *ngIf="userDataGenerated && !groupId" (click)="createGroup()" [disabled]="dataSubmitting || !groupname">{{ !dataSubmitting ? "Submit to Database" : "Working" }}</button>
            <button class="create-group__text--submit--button" [class.create-group__text--submit--enabled]="!dataSubmitting && groupname && !dataUpdated" [class.create-group__text--submit--updated]="dataUpdated" *ngIf="userDataGenerated && groupId" (click)="updateGroup()" [disabled]="dataSubmitting || !groupname || !dataChanged">{{ !dataSubmitting ? "Update Group Data" : "Updating Data" }}</button>
        </div>
        
        <div class="create-group__success" *ngIf="groupId">
            Group '<span>{{ groupname }}</span>' (ID: <span>{{ groupId }}</span>) created with manager <span>{{ user.name }}</span>.
        </div>
    </div>

    <div class="create-group__data" *ngIf="userData">

        <table class="create-group__data--table">
            <thead>
                <tr class="create-group__data--row create-group__data--header">
                    <td class="create-group__data--cell" *ngFor="let key of keys; let i = index">
                        <div class="create-group__data--cell--header">
                            <div (keyup.enter)="columnValueChange(i, $event)" (blur)="columnValueChange(i, $event)" contenteditable="true">{{ key }}</div>
                            <div class="create-group__data--buttons create-group__data--buttons-remove tooltipped" (click)="deleteColumn(i)">&#10006; <div class="tooltip">Delete this column (cannot be reversed)</div></div>
                        </div>
                    </td> 
                    <td class="create-group__data--cell">
                        <div class="create-group__data--buttons create-group__data--buttons-addcol tooltipped" (click)="addColumn()">&#10010; <div class="tooltip">Add a new column</div></div>
                    </td>
                </tr>                
            </thead>
            <tbody>
                <tr class="create-group__data--row create-group__data--data" *ngFor="let row of userData; let i = index">
                    <td class="create-group__data--cell" *ngFor="let user of sortDataForDisplay(row.data) | keyvalue : returnZero" (blur)="userValueChange(row.id, user.key, $event)" (keyup.enter)="userValueChange(row.id, user.key, $event)" contenteditable="true">
                        {{ user.value }}
                    </td>
                    <!-- PUT TEXT BOXES IN -->
                    <!-- <input type="text" name="" id=""> -->

                    <td class="create-group__data--cell">
                        <div class="create-group__data--buttons create-group__data--buttons-remove tooltipped" (click)="removeUser(row.id)">&#10006; <div class="tooltip">Delete this user</div></div>
                    </td> 
                </tr>              
            </tbody>
        </table>

    </div>

</div>