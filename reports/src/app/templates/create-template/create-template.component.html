<div class="create-template__form">

    <div class="create-template__label">Name</div>
    <input class="create-template__input create-template__input--name" (keyup)="checkForUpdates()" (keyup)="changeEmitter()" id="templateName" [(ngModel)]="templateName">

    <div class="create-template__label">Character Limit</div>
    <div class="create-template__characters">
        <input type="number" class="create-template__input create-template__input--number" (keyup)="checkForUpdates()" id="charMin" [(ngModel)]="templateCharacters.min" placeholder="from">
        <span>to</span>
        <input type="number" class="create-template__input create-template__input--number" (keyup)="checkForUpdates()" id="charMax" [(ngModel)]="templateCharacters.max" placeholder="to">
    </div>    
</div>

<div class="divider-line divider-line__thin u__margin-bottom--medium u__margin-top--medium"></div>

<div class="create-template__structure">
    
    <div class="create-template__label">Template Structure <span *ngIf="dragging">(Hit escape or drop to stop reordering)</span></div>
    <!-- // structural elements go here... -->
    
    <div class="create-template__builder">

        <div class="create-template__element" *ngFor="let templateSegment of templateRoutes; let t = index" (drag)="dragPositionChange(t)" draggable="true">
            <div class="create-template__dragbox" *ngIf="dragging" (drop)="dropPosition()" (dragover)="allowDrop($event)" value="{{t}}"></div>

            <div *ngIf="templateSegment[0] === 'newParagraph'">
                <div class="create-template__element--paragraph">Paragraph</div>
            </div>

            <div *ngIf="templateSegment[0] !== 'newParagraph'">
                <select name="test" id="test" class="create-template__element--select" *ngFor="let sentenceStem of viewData[t]; let s = index" (change)="updateElementRoute(t, s, $event.target.value)">
                    <option value="" [disabled]="s === 0"> {{ s === 0 ? "" : "** End **" }}</option>
                    <option value="allOptInclusive" [selected]="allInclusivityChecker(templateSegment[s+1])">** All options inclusive **</option>
                    <option value="test" *ngFor="let sentence of sentenceStem; let p = index" value="{{ sentence.id }}" [selected]="sentence.id === templateSegment[s+1]">
                        {{ sentence.name }} 
                        <span *ngFor="let test of sentence.tests; let testIndex = index">
                            {{ testIndex === 0 ? "( Tests: " : "" }}
                            {{ test.name }}
                            {{ testIndex < (sentence.tests.length - 1) ? "," : ")" }}
                        </span>
                    </option>
                </select>
            </div>

            <div class="create-template__element--delete" (click)="deleteElement(t)">
                &#10006;
            </div>
        </div>

        <div class="create-template__buttons">
            Add: 
            <div class="create-template__new" (click)="addElement()">Sentence</div>
            <div class="create-template__new" (click)="addParagraph()">P</div>
        </div>
    </div>
    
</div>

<div class="divider-line divider-line__thin u__margin-bottom--medium u__margin-top--medium"></div>
    
<div class="create-template__button-create">
    <button class="create-template__button-create--button" (click)="createTemplate()" *ngIf="!templateSaved && !templateId" [disabled]="canCreate()">{{ addingToDb ? "Creating Template..." : "Create Template" }}</button>
    <button class="create-template__button-create--button" (click)="updateTemplate()" *ngIf="templateSaved || templateId" [disabled]="!templateUpdated || !templateSaved">{{ updatingDb ? "Updating Template..." : "Update Template" }}</button>
    <button class="create-template__button-create--button" (click)="deleteTemplate()" *ngIf="templateSaved || templateId" [disabled]="deletingTemplate">{{ deletingTemplate ? "Deleting Template..." : "Delete Template" }}</button>
</div>


<div class="divider-line divider-line__thin u__margin-bottom--medium u__margin-top--medium"></div>

<div class="create-template__example" *ngIf="exampleSentence.report.length > 0">

    <div class="create-template__label">Example</div>
    <div class="create-template__example--description">
        <p>This is an example report that would be created from this template.</p> <!--There are a minimum of <b>{{ exampleSentence.options }}</b> potential report combinations for this template.</p> --> 
    </div>
    <div class="create-template__example-text" [innerHTML]="exampleSentence.report"></div>
</div>